// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider      = "prisma-client-js"
    binaryTargets = ["native", "debian-openssl-3.0.x"]
}

datasource db {
    provider     = "mysql"
    url          = env("DATABASE_URL")
    relationMode = "prisma"
}

model team {
    id       String   @id @default(cuid())
    name     String
    shots    shot[]
    players  player[]
    users_id String
    games    game[]   @relation("gameTOteam")

    @@index([users_id], name: "users_id")
}

model game {
    id     String @id @default(cuid())
    name   String
    teamId String
    shots  shot[]
    team   team   @relation("gameTOteam", fields: [teamId], references: [id])

    @@index([teamId])
}

model player {
    id          String  @id @default(cuid())
    name        String
    jersey      Int
    team        team    @relation(fields: [teamId], references: [id])
    teamId      String
    shots       shot[]
    totalPoints Int     @default(0)
    archived    Boolean @default(false)

    @@index([teamId])
}

model shot {
    id        String   @id @default(cuid())
    team      team     @relation(fields: [teamId], references: [id])
    teamId    String
    game      game     @relation(fields: [gameId], references: [id])
    gameId    String
    player    player   @relation(fields: [playerId], references: [id])
    playerId  String
    xPoint    Int
    yPoint    Int
    made      Boolean
    createdAt DateTime @default(now())
    updatedAt DateTime @default(now()) @updatedAt
    points    Int      @default(0)

    @@index([teamId])
    @@index([gameId])
    @@index([playerId])
}
